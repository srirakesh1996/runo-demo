<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- IMPORTANT: Prevent indexing -->
    <meta name="robots" content="noindex, nofollow" />

    <title>Download Runo App</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 40px;
        background: #f5f7fa;
      }
      .container {
        max-width: 600px;
        margin: auto;
        background: #fff;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      h2 {
        margin-bottom: 10px;
      }
      .icons {
        margin-top: 20px;
      }
      .icons a {
        margin: 10px;
        display: inline-block;
      }
      .icons img {
        width: 60px;
      }
      .note {
        margin-top: 20px;
        color: #666;
      }
    </style>

    <script>
      function getUTMParams() {
        var params = new URLSearchParams(window.location.search);

        var utm_source = params.get("utm_source") || "";
        var utm_campaign = params.get("utm_campaign") || "";

        var utmString = "";

        if (utm_source) utmString += "utm_source=" + encodeURIComponent(utm_source);
        if (utm_campaign) utmString += (utmString ? "&" : "") + "utm_campaign=" + encodeURIComponent(utm_campaign);

        return utmString;
      }

      function redirectToStore() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;

        var isIOS = /iPad|iPhone|iPod/.test(userAgent);
        var isAndroid = /android/i.test(userAgent);

        // Detect mobile even in desktop mode
        var isTouchDevice = "ontouchstart" in window || navigator.maxTouchPoints > 0;
        var isSmallScreen = window.innerWidth <= 1024;

        var utmParams = getUTMParams();

        var iosUrl = "https://apps.apple.com/us/app/runo-outbound-call-center-crm/id1528004506" + (utmParams ? "?" + utmParams : "");

        var androidUrl = "https://play.google.com/store/apps/details?id=in.runo.call_crm&hl=en_IN" + (utmParams ? "&" + utmParams : "");

        // Update button links with UTM
        document.getElementById("iosLink").href = iosUrl;
        document.getElementById("androidLink").href = androidUrl;

        // iOS Redirect
        if (isIOS || (isTouchDevice && isSmallScreen && /Mac/.test(userAgent))) {
          window.location.href = iosUrl;
          return;
        }

        // Android Redirect
        if (isAndroid || (isTouchDevice && isSmallScreen)) {
          window.location.href = androidUrl;
          return;
        }
      }

      window.onload = redirectToStore;
    </script>
  </head>

  <body>
    <div class="container">
      <h2>Download Runo App</h2>

      <p>You are being redirected to the correct app store...</p>

      <div class="icons">
        <a href="https://apps.apple.com/us/app/runo-outbound-call-center-crm/id1528004506">
          <img src="img/app-ico.png" alt="Download on App Store" />
        </a>

        <a href="https://play.google.com/store/apps/details?id=in.runo.call_crm&hl=en_IN">
          <img src="img/play-ico.png" alt="Get it on Google Play" />
        </a>
      </div>

      <p class="note">If you are not redirected automatically, please select your device above.</p>
    </div>
  </body>
</html>
